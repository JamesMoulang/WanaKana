!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(r.wanakana=r.wanakana||{})}(this,function(r){"use strict";function t(r,t,e){function n(r,t){if(void 0!==r[t])return Object.assign({"":r[""]+t},r[t])}function a(r,t){var e=r.charAt(0);return i(Object.assign({"":e},o[e]),r.slice(1),t,t+1)}function i(r,t,o,u){if(!t)return e||1===Object.keys(r).length?r[""]?[[o,u,r[""]]]:[]:[[o,u,null]];if(1===Object.keys(r).length)return[[o,u,r[""]]].concat(a(t,u));var l=n(r,t.charAt(0));return void 0===l?[[o,u,r[""]]].concat(a(t,u)):i(l,t.slice(1),o,u+1)}var o=t;return a(r,0)}function e(r){var t={},n=!0,a=!1,i=void 0;try{for(var o,u=Object.entries(r)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=G(o.value,2),c=l[0],v=l[1];t[c]="string"==typeof v?{"":v}:e(v)}}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t}function n(r,t){var e=r,n=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=o.value;void 0===e[l]&&(e[l]={}),e=e[l]}}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return e}function a(r){var t={},e=!0,n=!1,a=void 0;try{for(var i,o=Object.entries(r)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=G(i.value,2),l=u[0],c=u[1],v=t,f=!0,y=!1,s=void 0;try{for(var h,d=l[Symbol.iterator]();!(f=(h=d.next()).done);f=!0){var g=h.value;void 0===v[g]&&(v[g]={}),v=v[g]}}catch(r){y=!0,s=r}finally{try{!f&&d.return&&d.return()}finally{if(y)throw s}}v[""]=c}}catch(r){n=!0,a=r}finally{try{!e&&o.return&&o.return()}finally{if(n)throw a}}return function(r){function e(r,t){if(void 0===r||"string"==typeof r)return t;var n=r,a=!0,i=!1,o=void 0;try{for(var u,l=Object.entries(t)[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=G(u.value,2),v=c[0];n[v]=e(r[v],c[1])}}catch(r){i=!0,o=r}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return n}return e(JSON.parse(JSON.stringify(r)),t)}}function i(r){return"string"!=typeof r||!r.length}function o(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],e=arguments[2];if(i(r))return!1;var n=r.charCodeAt(0);return n>=t&&e>=n}function u(){return o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",hr,dr)}function l(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&[].concat(Q(r)).every(u)}function c(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&r.charCodeAt(0)===br}function v(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&r.charCodeAt(0)===pr}function f(){for(var r=[],t="",e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(""),n=0;e.length>n;n+=1){var a=e[n],i=[v(a),c(a)],o=i[1];if(i[0]||o&&1>n)r.push(a);else if(t&&o&&n>0){var l=jr[t].slice(-1);r.push(mr[l])}else if(!o&&u(a)){var f=a.charCodeAt(0)+(yr-hr),y=String.fromCharCode(f);r.push(y),t=y}else r.push(a),t=""}return r.join("")}function y(){function r(t){var e={},n=!0,a=!1,i=void 0;try{for(var o,u=Object.entries(t)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=G(o.value,2),c=l[0],v=l[1];if(c)e[c]=r(v);else{var f=v.charAt(0);e[c]=f in tr?tr[f]+v:v}}}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return e}var t=e({"あ":"a","い":"i","う":"u","え":"e","お":"o","か":"ka","き":"ki","く":"ku","け":"ke","こ":"ko","さ":"sa","し":"shi","す":"su","せ":"se","そ":"so","た":"ta","ち":"chi","つ":"tsu","て":"te","と":"to","な":"na","に":"ni","ぬ":"nu","ね":"ne","の":"no","は":"ha","ひ":"hi","ふ":"fu","へ":"he","ほ":"ho","ま":"ma","み":"mi","む":"mu","め":"me","も":"mo","や":"ya","ゆ":"yu","よ":"yo","ら":"ra","り":"ri","る":"ru","れ":"re","ろ":"ro","わ":"wa","ゐ":"wi","ゑ":"we","を":"wo","が":"ga","ぎ":"gi","ぐ":"gu","げ":"ge","ご":"go","ざ":"za","じ":"ji","ず":"zu","ぜ":"ze","ぞ":"zo","だ":"da","ぢ":"ji","づ":"zu","で":"de","ど":"do","ば":"ba","び":"bi","ぶ":"bu","べ":"be","ぼ":"bo","ぱ":"pa","ぴ":"pi","ぷ":"pu","ぺ":"pe","ぽ":"po","ゔぁ":"va","ゔぃ":"vi","ゔ":"vu","ゔぇ":"ve","ゔぉ":"vo","ん":"n"}),a=function(r){return n(t,r)},i=function(r,t){a(r)[""]=t},o=!0,u=!1,l=void 0;try{for(var c,v=Object.entries({"。":".","、":",","：":":","・":"/","！":"!","？":"?","〜":"~","ー":"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","　":" "})[Symbol.iterator]();!(o=(c=v.next()).done);o=!0){var f=G(c.value,2),y=f[1];a(f[0])[""]=y}}catch(r){u=!0,l=r}finally{try{!o&&v.return&&v.return()}finally{if(u)throw l}}var s={"ゃ":"ya","ゅ":"yu","ょ":"yo"},h={"ぃ":"yi","ぇ":"ye"},d=!0,g=!1,w=void 0;try{for(var b,p=Object.entries(s).concat(Object.entries({"ぁ":"a","ぃ":"i","ぅ":"u","ぇ":"e","ぉ":"o"}))[Symbol.iterator]();!(d=(b=p.next()).done);d=!0){var m=G(b.value,2);i(m[0],m[1])}}catch(r){g=!0,w=r}finally{try{!d&&p.return&&p.return()}finally{if(g)throw w}}var j=!0,O=!1,k=void 0;try{for(var S,x=["き","に","ひ","み","り","ぎ","び","ぴ","ゔ","く","ふ"][Symbol.iterator]();!(j=(S=x.next()).done);j=!0){var z=S.value,A=a(z)[""][0],C=!0,E=!1,M=void 0;try{for(var R,N=Object.entries(s)[Symbol.iterator]();!(C=(R=N.next()).done);C=!0){var q=G(R.value,2);i(z+q[0],A+q[1])}}catch(r){E=!0,M=r}finally{try{!C&&N.return&&N.return()}finally{if(E)throw M}}var K=!0,J=!1,I=void 0;try{for(var L,H=Object.entries(h)[Symbol.iterator]();!(K=(L=H.next()).done);K=!0){var P=G(L.value,2);i(z+P[0],A+P[1])}}catch(r){J=!0,I=r}finally{try{!K&&H.return&&H.return()}finally{if(J)throw I}}}}catch(r){O=!0,k=r}finally{try{!j&&x.return&&x.return()}finally{if(O)throw k}}var T=!0,U=!1,B=void 0;try{for(var _,D=Object.entries({"し":"sh","ち":"ch","じ":"j","ぢ":"j"})[Symbol.iterator]();!(T=(_=D.next()).done);T=!0){var W=G(_.value,2),X=W[0],F=W[1],Q=!0,V=!1,Y=void 0;try{for(var Z,$=Object.entries(s)[Symbol.iterator]();!(Q=(Z=$.next()).done);Q=!0){var rr=G(Z.value,2);i(X+rr[0],F+rr[1][1])}}catch(r){V=!0,Y=r}finally{try{!Q&&$.return&&$.return()}finally{if(V)throw Y}}i(X+"ぃ",F+"yi"),i(X+"ぇ",F+"e")}}catch(r){U=!0,B=r}finally{try{!T&&D.return&&D.return()}finally{if(U)throw B}}var tr={b:"b",c:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",z:"z"};t["っ"]=r(t);var er=!0,nr=!1,ar=void 0;try{for(var ir,or=Object.entries({"っ":"","ゎ":"wa","ゕ":"ka","ゖ":"ka","ゃ":"ya","ゅ":"yu","ょ":"yo","ぁ":"a","ぃ":"i","ぅ":"u","ぇ":"e","ぉ":"o"})[Symbol.iterator]();!(er=(ir=or.next()).done);er=!0){var ur=G(ir.value,2);i(ur[0],ur[1])}}catch(r){nr=!0,ar=r}finally{try{!er&&or.return&&or.return()}finally{if(nr)throw ar}}var lr=!0,cr=!1,vr=void 0;try{for(var fr,yr=["あ","い","う","え","お","や","ゆ","よ"][Symbol.iterator]();!(lr=(fr=yr.next()).done);lr=!0){var sr=fr.value;i("ん"+sr,"n'"+a(sr)[""])}}catch(r){cr=!0,vr=r}finally{try{!lr&&yr.return&&yr.return()}finally{if(cr)throw vr}}var hr=!0,dr=!1,gr=void 0;try{for(var wr,br=["ば","び","ぶ","べ","ぼ","ぱ","ぴ","ぷ","ぺ","ぽ","ま","み","む","め","も"][Symbol.iterator]();!(hr=(wr=br.next()).done);hr=!0){var pr=wr.value;i("ん"+pr,"m"+a(pr)[""])}}catch(r){dr=!0,gr=r}finally{try{!hr&&br.return&&br.return()}finally{if(dr)throw gr}}return Object.freeze(JSON.parse(JSON.stringify(t)))}function s(){return null===Y&&(Y=y()),Y}function h(r){switch(r.romanization){case V.HEPBURN:return s(r);default:return{}}}function d(){return[].concat(Q(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")).map(function(r,t){var e=r.charCodeAt(0),n=o(r,lr,cr),a=o(r,vr,fr);return n?String.fromCharCode(e-lr+ir):a?String.fromCharCode(e-vr+or):r}).join("")}function g(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=1>=arguments.length||void 0===arguments[1]||arguments[1];if(i(r))return!1;var e=t?/[bcdfghjklmnpqrstvwxyz]/:/[bcdfghjklmnpqrstvwxz]/;return-1!==r.toLowerCase().charAt(0).search(e)}function w(){function r(t){var e={},n=!0,a=!1,i=void 0;try{for(var o,u=Object.entries(t)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=G(o.value,2),c=l[0],v=l[1];e[c]=c?r(v):"っ"+v}}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return e}var t=e({a:"あ",i:"い",u:"う",e:"え",o:"お",k:{a:"か",i:"き",u:"く",e:"け",o:"こ"},s:{a:"さ",i:"し",u:"す",e:"せ",o:"そ"},t:{a:"た",i:"ち",u:"つ",e:"て",o:"と"},n:{a:"な",i:"に",u:"ぬ",e:"ね",o:"の"},h:{a:"は",i:"ひ",u:"ふ",e:"へ",o:"ほ"},m:{a:"ま",i:"み",u:"む",e:"め",o:"も"},y:{a:"や",u:"ゆ",o:"よ"},r:{a:"ら",i:"り",u:"る",e:"れ",o:"ろ"},w:{a:"わ",i:"ゐ",e:"ゑ",o:"を"},g:{a:"が",i:"ぎ",u:"ぐ",e:"げ",o:"ご"},z:{a:"ざ",i:"じ",u:"ず",e:"ぜ",o:"ぞ"},d:{a:"だ",i:"ぢ",u:"づ",e:"で",o:"ど"},b:{a:"ば",i:"び",u:"ぶ",e:"べ",o:"ぼ"},p:{a:"ぱ",i:"ぴ",u:"ぷ",e:"ぺ",o:"ぽ"},v:{a:"ゔぁ",i:"ゔぃ",u:"ゔ",e:"ゔぇ",o:"ゔぉ"}}),a=function(r){return n(t,r)},i={k:"き",s:"し",t:"ち",n:"に",h:"ひ",m:"み",r:"り",g:"ぎ",z:"じ",d:"ぢ",b:"び",p:"ぴ",v:"ゔ",q:"く",f:"ふ"},o={ya:"ゃ",yi:"ぃ",yu:"ゅ",ye:"ぇ",yo:"ょ"},u={a:"ぁ",i:"ぃ",u:"ぅ",e:"ぇ",o:"ぉ"},l=!0,c=!1,v=void 0;try{for(var f,y=Object.entries(i)[Symbol.iterator]();!(l=(f=y.next()).done);l=!0){var s=G(f.value,2),h=s[0],d=s[1],g=!0,w=!1,b=void 0;try{for(var p,m=Object.entries(o)[Symbol.iterator]();!(g=(p=m.next()).done);g=!0){var j=G(p.value,2),O=j[1];a(h+j[0])[""]=d+O}}catch(r){w=!0,b=r}finally{try{!g&&m.return&&m.return()}finally{if(w)throw b}}}}catch(r){c=!0,v=r}finally{try{!l&&y.return&&y.return()}finally{if(c)throw v}}var k=!0,S=!1,x=void 0;try{for(var z,A=Object.entries({".":"。",",":"、",":":"：","/":"・","!":"！","?":"？","~":"〜","-":"ー","‘":"「","’":"」","“":"『","”":"』","[":"［","]":"］","(":"（",")":"）","{":"｛","}":"｝"})[Symbol.iterator]();!(k=(z=A.next()).done);k=!0){var C=G(z.value,2),E=C[1];a(C[0])[""]=E}}catch(r){S=!0,x=r}finally{try{!k&&A.return&&A.return()}finally{if(S)throw x}}var M=!0,R=!1,N=void 0;try{for(var q,K=Object.entries({wh:"う",qw:"く",q:"く",gw:"ぐ",sw:"す",ts:"つ",th:"て",tw:"と",dh:"で",dw:"ど",fw:"ふ",f:"ふ"})[Symbol.iterator]();!(M=(q=K.next()).done);M=!0){var J=G(q.value,2),I=J[0],L=J[1],H=!0,P=!1,T=void 0;try{for(var U,B=Object.entries(u)[Symbol.iterator]();!(H=(U=B.next()).done);H=!0){var _=G(U.value,2),D=_[1];(Ur=a(I+_[0]))[""]=L+D}}catch(r){P=!0,T=r}finally{try{!H&&B.return&&B.return()}finally{if(P)throw T}}}}catch(r){R=!0,N=r}finally{try{!M&&K.return&&K.return()}finally{if(R)throw N}}for(var W=["n","n'","xn"],X=0;W.length>X;X++)a(W[X])[""]="ん";var F={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"};t.c=JSON.parse(JSON.stringify(t.k));var Q=!0,V=!1,Y=void 0;try{for(var Z,$=Object.entries(F)[Symbol.iterator]();!(Q=(Z=$.next()).done);Q=!0){var rr=G(Z.value,2),tr=rr[0],er=rr[1],nr=tr.slice(0,tr.length-1),ar=tr.charAt(tr.length-1);a(nr)[ar]=JSON.parse(JSON.stringify(a(er)))}}catch(r){V=!0,Y=r}finally{try{!Q&&$.return&&$.return()}finally{if(V)throw Y}}var ir=Object.assign({tu:"っ",wa:"ゎ",ka:"ヵ",ke:"ヶ"},u,o),or=!0,ur=!1,lr=void 0;try{for(var cr,vr=Object.entries(ir)[Symbol.iterator]();!(or=(cr=vr.next()).done);or=!0){var fr=G(cr.value,2),yr=fr[0],sr=fr[1],hr=a("x"+yr);hr[""]=sr;var dr=yr.slice(0,yr.length-1),gr=yr.charAt(yr.length-1);a("l"+dr)[gr]=hr;var wr=!0,br=!1,pr=void 0;try{for(var mr,jr=function(r){var t=[],e=!0,n=!1,a=void 0;try{for(var i,o=Object.entries(F).concat([["c","k"]])[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=G(i.value,2),l=u[0],c=u[1];r.startsWith(c)&&t.push(r.replace(c,l))}}catch(r){n=!0,a=r}finally{try{!e&&o.return&&o.return()}finally{if(n)throw a}}return t}(yr)[Symbol.iterator]();!(wr=(mr=jr.next()).done);wr=!0)for(var Or=mr.value,kr=Or.slice(0,Or.length-1),Sr=Or.charAt(Or.length-1),xr=["l","x"],zr=0;xr.length>zr;zr++){var Ar=xr[zr];a(Ar+kr)[Sr]=a(Ar+yr)}}catch(r){br=!0,pr=r}finally{try{!wr&&jr.return&&jr.return()}finally{if(br)throw pr}}}}catch(r){ur=!0,lr=r}finally{try{!or&&vr.return&&vr.return()}finally{if(ur)throw lr}}var Cr=!0,Er=!1,Mr=void 0;try{for(var Rr,Nr=Object.entries({yi:"い",wu:"う",ye:"いぇ",wi:"うぃ",we:"うぇ",kwa:"くぁ",whu:"う",tha:"てゃ",thu:"てゅ",tho:"てょ",dha:"でゃ",dhu:"でゅ",dho:"でょ"})[Symbol.iterator]();!(Cr=(Rr=Nr.next()).done);Cr=!0){var qr=G(Rr.value,2),Kr=qr[1];a(qr[0])[""]=Kr}}catch(r){Er=!0,Mr=r}finally{try{!Cr&&Nr.return&&Nr.return()}finally{if(Er)throw Mr}}var Jr=!0,Ir=!1,Lr=void 0;try{for(var Hr,Pr=Object.keys(i).concat("c","y","w","j")[Symbol.iterator]();!(Jr=(Hr=Pr.next()).done);Jr=!0){var Tr=Hr.value,Ur=t[Tr];Ur[Tr]=r(Ur)}}catch(r){Ir=!0,Lr=r}finally{try{!Jr&&Pr.return&&Pr.return()}finally{if(Ir)throw Lr}}return delete t.n.n,Object.freeze(JSON.parse(JSON.stringify(t)))}function b(r){return null===Or&&(Or=w()),Or}function p(r){var t=JSON.parse(JSON.stringify(r));return t.n.n={"":"ん"},t.n[" "]={"":"ん"},t}function m(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&o(r,or,ur)}function j(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&(!!c(r)||o(r,yr,sr))}function O(){var r=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("").forEach(function(t){if(c(t)||v(t))r.push(t);else if(j(t)){var e=t.charCodeAt(0)+(hr-yr),n=String.fromCharCode(e);r.push(n)}else r.push(t)}),r.join("")}function k(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S(r,t).map(function(e){var n=G(e,3),a=n[0],i=n[2];return null===i?r.slice(a):!t.ignoreCase&&m(r.charAt(a))?O(i):i}).join("")}function S(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=Object.assign({},Z,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=b(e);return n=e.IMEMode?p(n):n,n=e.useObsoleteKana?kr(n):n,n=e.customKanaMapping(n),t(r.toLowerCase(),n,!e.IMEMode)}function x(r){var t=Object.assign({},Z,r);return function(r){var e=r.target;if(Ar)Ar=!1;else{var n=d(e.value),a=M(n,t.IMEMode),i=Object.assign({},t,{IMEMode:!0}),o=S(a,i),u=k(a,i);if(n!==u){var l=e.selectionEnd;if(e.value=u,null!==e.setSelectionRange&&"number"==typeof e.selectionStart){if(0===l)e.setSelectionRange(0,0);else{e.setSelectionRange(e.value.length,e.value.length);for(var c=0,v=0;o.length>v;v+=1){var f=G(o[v],3);if(c+=f[2].length,f[1]>=l){e.setSelectionRange(c,c);break}}}return}if(null!=e.createTextRange){e.focus();var y=e.createTextRange();y.collapse(!1),y.select()}}}}}function z(r){var t=r.data||r.detail&&r.detail.data,e=t&&t.slice(-2).split("")||[],n="n"===e[0],a=e.every(function(r){return g(d(r))});Ar=!n&&a}function A(r,t){return xr.concat({id:t,handler:r})}function C(r){return r&&xr.find(function(t){return t.id===r.getAttribute("data-wanakana-id")})}function E(r){var t=r.id;return xr.filter(function(r){return r.id!==t})}function M(r,t){switch(!0){case"toHiragana"===t:return r.toLowerCase();case"toKatakana"===t:return r.toUpperCase();default:return r}}function R(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&nr.some(function(t){var e=G(t,2);return o(r,e[0],e[1])})}function N(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&[].concat(Q(r)).every(R)}function q(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return er.some(function(t){var e=G(t,2);return o(r,e[0],e[1])})}function K(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&[].concat(Q(r)).every(q)}function J(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&(j(r)||u(r))}function I(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&[].concat(Q(r)).every(J)}function L(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&[].concat(Q(r)).every(j)}function H(){return o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",gr,wr)}function P(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&[].concat(Q(r)).every(H)}function T(){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{passKanji:!0},t=[].concat(Q(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")),e=!1;return r.passKanji||(e=t.some(P)),(t.some(L)||t.some(l))&&t.some(N)&&!e}function U(){return k(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",Object.assign({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{ignoreCase:!0}))}function B(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object.assign({},Z,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return t.passRomaji?f(r):N(r)?U(r,t):T(r,{passKanji:!0})?U(f(r),t):f(r)}function _(r,e){var n=h(e);return n=e.customRomajiMapping(n),t(B(r,{passRomaji:!0}),n,!e.IMEMode)}function D(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&ar.some(function(t){var e=G(t,2);return o(r,e[0],e[1])})}function W(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&tr.some(function(t){var e=G(t,2);return o(r,e[0],e[1])})}function X(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&(D(r)||W(r))}function F(r){switch(!0){case W(r):return"japanesePunctuation";case H(r):return"kanji";case j(r):return"hiragana";case u(r):return"katakana";default:return"romaji"}}var G=function(){function r(r,t){var e=[],n=!0,a=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(n=(o=u.next()).done)&&(e.push(o.value),!t||e.length!==t);n=!0);}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Q=function(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);r.length>t;t++)e[t]=r[t];return e}return Array.from(r)},V=Object.freeze({HEPBURN:"hepburn"}),Y=null,Z={useObsoleteKana:!1,passRomaji:!1,upcaseKatakana:!1,ignoreCase:!1,IMEMode:!1,romanization:V.HEPBURN,customKanaMapping:function(r){return r},customRomajiMapping:function(r){return r}},$=[65377,65381],rr=[[8216,8217],[8220,8221]],tr=[[12288,12351],$,[12539,12540],[65281,65295],[65306,65311],[65339,65343],[65371,65376],[65504,65518]],er=[].concat([[12352,12447],[12448,12543],$,[65382,65439]],tr,[[48,57],[65296,65305],[19968,40959],[13312,19903]]),nr=[[0,127]].concat([[256,257],[274,275],[298,299],[332,333],[362,363]],rr),ar=[[33,47],[58,63],[91,96],[123,126]].concat(rr),ir=97,or=65,ur=90,lr=65345,cr=65370,vr=65313,fr=65338,yr=12353,sr=12438,hr=12449,dr=12540,gr=19968,wr=40879,br=12540,pr=12539,mr={a:"あ",i:"い",u:"う",e:"え",o:"う"},jr={"　":" ","！":"!","？":"?","。":".","：":":","・":"/","、":",","〜":"~","ー":"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","あ":"a","い":"i","う":"u","え":"e","お":"o","ゔぁ":"va","ゔぃ":"vi","ゔ":"vu","ゔぇ":"ve","ゔぉ":"vo","か":"ka","き":"ki","きゃ":"kya","きぃ":"kyi","きゅ":"kyu","く":"ku","け":"ke","こ":"ko","が":"ga","ぎ":"gi","ぐ":"gu","げ":"ge","ご":"go","ぎゃ":"gya","ぎぃ":"gyi","ぎゅ":"gyu","ぎぇ":"gye","ぎょ":"gyo","さ":"sa","す":"su","せ":"se","そ":"so","ざ":"za","ず":"zu","ぜ":"ze","ぞ":"zo","し":"shi","しゃ":"sha","しゅ":"shu","しょ":"sho","じ":"ji","じゃ":"ja","じゅ":"ju","じょ":"jo","た":"ta","ち":"chi","ちゃ":"cha","ちゅ":"chu","ちょ":"cho","つ":"tsu","て":"te","と":"to","だ":"da","ぢ":"di","づ":"du","で":"de","ど":"do","な":"na","に":"ni","にゃ":"nya","にゅ":"nyu","にょ":"nyo","ぬ":"nu","ね":"ne","の":"no","は":"ha","ひ":"hi","ふ":"fu","へ":"he","ほ":"ho","ひゃ":"hya","ひゅ":"hyu","ひょ":"hyo","ふぁ":"fa","ふぃ":"fi","ふぇ":"fe","ふぉ":"fo","ば":"ba","び":"bi","ぶ":"bu","べ":"be","ぼ":"bo","びゃ":"bya","びゅ":"byu","びょ":"byo","ぱ":"pa","ぴ":"pi","ぷ":"pu","ぺ":"pe","ぽ":"po","ぴゃ":"pya","ぴゅ":"pyu","ぴょ":"pyo","ま":"ma","み":"mi","む":"mu","め":"me","も":"mo","みゃ":"mya","みゅ":"myu","みょ":"myo","や":"ya","ゆ":"yu","よ":"yo","ら":"ra","り":"ri","る":"ru","れ":"re","ろ":"ro","りゃ":"rya","りゅ":"ryu","りょ":"ryo","わ":"wa","を":"wo","ん":"n","ゐ":"wi","ゑ":"we","きぇ":"kye","きょ":"kyo","じぃ":"jyi","じぇ":"jye","ちぃ":"cyi","ちぇ":"che","ひぃ":"hyi","ひぇ":"hye","びぃ":"byi","びぇ":"bye","ぴぃ":"pyi","ぴぇ":"pye","みぇ":"mye","みぃ":"myi","りぃ":"ryi","りぇ":"rye","にぃ":"nyi","にぇ":"nye","しぃ":"syi","しぇ":"she","いぇ":"ye","うぁ":"wha","うぉ":"who","うぃ":"wi","うぇ":"we","ゔゃ":"vya","ゔゅ":"vyu","ゔょ":"vyo","すぁ":"swa","すぃ":"swi","すぅ":"swu","すぇ":"swe","すぉ":"swo","くゃ":"qya","くゅ":"qyu","くょ":"qyo","くぁ":"qwa","くぃ":"qwi","くぅ":"qwu","くぇ":"qwe","くぉ":"qwo","ぐぁ":"gwa","ぐぃ":"gwi","ぐぅ":"gwu","ぐぇ":"gwe","ぐぉ":"gwo","つぁ":"tsa","つぃ":"tsi","つぇ":"tse","つぉ":"tso","てゃ":"tha","てぃ":"thi","てゅ":"thu","てぇ":"the","てょ":"tho","とぁ":"twa","とぃ":"twi","とぅ":"twu","とぇ":"twe","とぉ":"two","ぢゃ":"dya","ぢぃ":"dyi","ぢゅ":"dyu","ぢぇ":"dye","ぢょ":"dyo","でゃ":"dha","でぃ":"dhi","でゅ":"dhu","でぇ":"dhe","でょ":"dho","どぁ":"dwa","どぃ":"dwi","どぅ":"dwu","どぇ":"dwe","どぉ":"dwo","ふぅ":"fwu","ふゃ":"fya","ふゅ":"fyu","ふょ":"fyo","ぁ":"a","ぃ":"i","ぇ":"e","ぅ":"u","ぉ":"o","ゃ":"ya","ゅ":"yu","ょ":"yo","っ":"","ゕ":"ka","ゖ":"ka","ゎ":"wa","んあ":"n'a","んい":"n'i","んう":"n'u","んえ":"n'e","んお":"n'o","んや":"n'ya","んゆ":"n'yu","んよ":"n'yo"},Or=null,kr=a({wi:"ゐ",we:"ゑ"}),Sr=["TEXTAREA","INPUT"],xr=[],zr=0,Ar=!1,Cr=function(){return zr+=1,""+Date.now()+zr};r.bind=function(r){var t=x(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(r instanceof Element&&Sr.includes(r.nodeName)){var e=Cr();r.setAttribute("data-wanakana-id",e),r.autocapitalize="none",r.addEventListener("compositionupdate",z),r.addEventListener("input",t),xr=A(t,e)}else console.warn("Input provided to wanakana.bind was not a valid input field.")},r.unbind=function(r){var t=C(r);null!=t?(r.removeAttribute("data-wanakana-id"),r.removeEventListener("compositionupdate",z),r.removeEventListener("input",t.handler),xr=E(t)):console.warn("Input had no listener registered.")},r.isRomaji=N,r.isJapanese=K,r.isKana=I,r.isHiragana=L,r.isKatakana=l,r.isMixed=T,r.isKanji=P,r.toRomaji=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=Object.assign({},Z,t);return _(r,e).map(function(e){var n=G(e,3),a=n[2];return t.upcaseKatakana&&l(r.slice(n[0],n[1]))?a.toUpperCase():a}).join("")},r.toKana=k,r.toHiragana=B,r.toKatakana=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object.assign({},Z,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return O(t.passRomaji?r:N(r)||T(r)?U(r,t):r)},r.stripOkurigana=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{all:!1};if(i(r)||!K(r)||I(r))return r;var e=[].concat(Q(r));if(t.all)return e.filter(function(r){return!J(r)}).join("");for(var n=e.reverse(),a=0,o=n.length;o>a;a+=1){var u=n[a];if(!X(u)){if(P(u))break;n[a]=""}}return n.reverse().join("")},r.tokenize=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(i(r))return[""];var t=[].concat(Q(r)),e=t.shift(),n=F(e);return t.reduce(function(r,t){var e=F(t)===n;if(n=F(t),e){var a=r.pop();return r.concat(a.concat(t))}return r.concat(t)},[e])},r.createCustomMapping=a,r.methods=V,Object.defineProperty(r,"__esModule",{value:!0})});
